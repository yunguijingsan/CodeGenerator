package ${params.voPackage};

import com.shine.core.exception.ServiceException;
import com.shine.core.utils.common.CommonUtils;
import ${params.entityBasePath}.${params.entityName};
//import ${params.conditionPackage}.${params.entityName}Condition;

import oracle.jbo.Key;
import oracle.jbo.Row;
import oracle.jbo.RowIterator;
import oracle.jbo.ViewCriteria;
import oracle.jbo.ViewCriteriaRow;
import oracle.jbo.ViewObject;
import oracle.jbo.server.SequenceImpl;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Fri Apr 22 09:13:46 CST 2016
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class ${params.entityName}VOImpl extends ViewObjectImpl {
    /**
     * This is the default constructor (do not remove).
     */
    public ${params.entityName}VOImpl() {
    }
    private final String seq${params.entityName}="BCS_WIP_PLAN_HEADER_S";
    
    private Integer generateSeq(String seqName){
          SequenceImpl seq=new SequenceImpl(seqName,this.getDBTransaction());
          Integer seqNextval=seq.getSequenceNumber().intValue();
          return seqNextval;
    }
    public Row[] find${params.entityName}ByKey(Key pKey){
        Row [] rows=this.findByKey(pKey,-1);
        return rows; 
    } 
    public RowIterator find${params.entityName}ByAltKey(String columnName,String columValue) {
        Key altKey = new Key(new Object[] { columValue });
        RowIterator iter = findByAltKey(columnName, altKey, -1, false);
        return iter;
    }
    public void update${params.entityName}(${params.entityName} ${params.nameLowerFirstCharactor}){
        Key key=new Key(new Object[]{planHeader.get${params.entityName}Id()});
        this.setWhereClause(null);
        this.applyViewCriteria(null);
        this.executeQuery();
        Row [] rows=this.findByKey(key, 1);
        if(rows!=null&&rows.length>0){
            Row row = rows[0];
            //TODO
        }else{
            throw ServiceException.create("PUBLIC.ENTITY.NOT.FOUND");    
        }
    }
    public void create${params.entityName}(${params.entityName} planHeader){
          Row row=this.createRow();
		  //TODO
    }
    
    public RowIterator search${params.entityName}s(/*TODO ${params.entityName}Condition condition*/){
         this.setWhereClause(null);
         this.setOrderByClause(null);
         this.setFetchMode(FETCH_ALL);
         ViewCriteria vc=this.createViewCriteria();
         ViewCriteriaRow vcr=vc.createViewCriteriaRow();
         //查询条件设置 TODO
         vc.setViewObject(this);
         vc.add(vcr);
         this.executeQuery();
         RowIterator rowIterator = findByViewCriteria(vc, -1, ViewObject.QUERY_MODE_SCAN_VIEW_ROWS);
         return rowIterator;
    }
    
    public void delete${params.entityName}(Key pKey){
        Row[] rows=this.findByKey(pKey,-1);
        if(rows!=null&&rows.length==1){
           Row row=rows[0];
           row.remove();
        }else{
            throw ServiceException.create("PUBLIC.ENTITY.NOT.FOUND");    
        }
    }
}

